################################################################################
# Qualytics EKS - Example Configuration
#
# Copy this file to terraform.tfvars and customize the values for your
# deployment. Required values are marked with "REQUIRED".
################################################################################

#-------------------------------------------------------------------------------
# General Configuration
#-------------------------------------------------------------------------------

# AWS region for the EKS cluster
aws_region = "us-east-1"

# Name of the EKS cluster
cluster_name = "qualytics"

# Kubernetes version (1.30+ recommended)
kubernetes_version = "1.33"

# Default tags applied to all resources
default_tags = {
  Terraform   = "true"
  Application = "qualytics"
  Environment = "production"
}

#-------------------------------------------------------------------------------
# Networking
#-------------------------------------------------------------------------------

# VPC CIDR block - adjust if it conflicts with existing networks
vpc_cidr = "10.0.0.0/16"

# Use single NAT Gateway (set to false for high availability in production)
single_nat_gateway = true

# Enable public access to the cluster API endpoint
cluster_endpoint_public_access = true

#-------------------------------------------------------------------------------
# Application Nodes
# For: API, Frontend, PostgreSQL, RabbitMQ, Spark Operator, Cert-Manager
#-------------------------------------------------------------------------------

# Instance types - m8g.2xlarge (8 vCPUs, 32 GB) recommended
app_node_instance_types = ["m8g.2xlarge"]

# Node counts
app_node_min_size     = 1
app_node_max_size     = 3
app_node_desired_size = 1

#-------------------------------------------------------------------------------
# Spark Driver Nodes
# For: Spark driver process
#-------------------------------------------------------------------------------

# Instance types - r8g.2xlarge (8 vCPUs, 64 GB memory) recommended
driver_node_instance_types = ["r8g.2xlarge"]

# Node counts
driver_node_min_size     = 0
driver_node_max_size     = 1
driver_node_desired_size = 1

#-------------------------------------------------------------------------------
# Spark Executor Nodes
# For: Spark executor processes (data processing)
#-------------------------------------------------------------------------------

# Instance types - r8gd.2xlarge (8 vCPUs, 64 GB, 474 GB NVMe SSD) recommended
# The 'd' suffix indicates local NVMe storage for optimal Spark performance
executor_node_instance_types = ["r8gd.2xlarge"]

# Node counts - scales based on workload
executor_node_min_size     = 1
executor_node_max_size     = 12
executor_node_desired_size = 1

# Use SPOT instances for cost savings (ON_DEMAND for guaranteed capacity)
executor_capacity_type = "SPOT"

#-------------------------------------------------------------------------------
# Node Configuration
#-------------------------------------------------------------------------------

# Enable taints to ensure workloads run on appropriate nodes (requires matching tolerations in values.yaml)
enable_node_taints = false

# Enable NVMe setup script for executor nodes with local SSDs
enable_nvme_setup = true

#-------------------------------------------------------------------------------
# Optional Features
#-------------------------------------------------------------------------------

# Create IAM role for Cluster Autoscaler
enable_cluster_autoscaler = true

# Create the qualytics namespace
create_qualytics_namespace = true

# Docker registry token (REQUIRED - provided by Qualytics)
# Uncomment and set this to automatically create the registry secret
# docker_registry_token = "your-token-from-qualytics"
